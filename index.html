<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THIS THAT STUDIO å¸‚é›†ç»Ÿè®¡</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .touch-button {
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const ArtMarketCounter = () => {
            const productCategories = {
                'å¤§æ‰‹æåŒ…': ['é•¿æ¯›ç‹—', 'å°ä¹–ç‹—', 'è¿é£å°ç‹—', 'ä¸‰è§’å¸½å°ç‹—', 'è´è¶å…”', 'å…”å¤´', 'ç†Šå¤´', 'é•¿é¢åŒ…', 'é»‘ç‹—å¤´', 'å“ˆå·´ç‹—'],
                'æ¯å«': ['ä¸‰è§’å¸½å°ç‹—', 'å°ä¹–ç‹—', 'ä¸‰å¤´é¢åŒ…', 'å››å¤´é¢åŒ…', 'ç†Šå¤´', 'ç‹—å¤´', 'è´è¶ç»“å…”', 'è¿é£å°ç‹—', 'å…”å¤´', 'å‚è€³å…”å¤´', 'å°èƒ–å…”å¤´', 'å››å¤´åˆ˜æµ·é¢åŒ…', 'çŒ«å¤´', 'ä¸‰å¤´åœ†çœ¼ç›é¢åŒ…', 'èœ¡æŸ“æ¯å«'],
                'é¤å«': ['å°ä¹–ç‹—', 'ä¸‰è§’å¸½å°ç‹—'],
                'æ‹‰é“¾å°åŒ…': ['å…”å¤´', 'ç‹—å¤´', 'ç†Šå¤´', 'å››å¤´é¢åŒ…', 'ä¸‰è§’å¸½å°ç‹—', 'è´è¶ç»“å…”', 'è¿é£å°ç‹—', 'ä¸‰å¤´é¢åŒ…', 'å°ä¹–ç‹—', 'å‚è€³å…”å¤´', 'çŒ«å¤´', 'ä¸‰å¤´åœ†çœ¼ç›é¢åŒ…', 'å°èƒ–å…”å¤´', 'å››å¤´åˆ˜æµ·é¢åŒ…', 'çœ‰æ¯›å°ç‹—ç”Ÿæ°”', 'çº¢é¢†å·¾å°ç‹—', 'ç¡ç€å°ç‹—'],
                'å°å·æ–œæŒåŒ…': ['ä¸‰è§’å¸½å°ç‹—', 'å°ä¹–ç‹—', 'å…”å¤´', 'ç‹—å¤´'],
                'å¤§å·æ–œæŒåŒ…': ['ä¸‰è§’å¸½å°ç‹—', 'å…”å¤´', 'å°ä¹–ç‹—', 'å“ˆå·´ç‹—'],
                'æ‰‡å­': ['ä¸‰è§’å¸½å°ç‹—', 'çœ‰æ¯›å°ç‹—']
            };

            const initializeCounts = () => {
                const counts = {};
                Object.keys(productCategories).forEach(category => {
                    counts[category] = {};
                    productCategories[category].forEach(pattern => {
                        counts[category][pattern] = 0;
                    });
                });
                return counts;
            };

            const [counts, setCounts] = useState(initializeCounts);
            const [currentCategory, setCurrentCategory] = useState(null);
            const [showSummary, setShowSummary] = useState(false);

            const incrementCount = (category, pattern) => {
                setCounts(prev => ({
                    ...prev,
                    [category]: {
                        ...prev[category],
                        [pattern]: prev[category][pattern] + 1
                    }
                }));
            };

            const decrementCount = (category, pattern) => {
                setCounts(prev => ({
                    ...prev,
                    [category]: {
                        ...prev[category],
                        [pattern]: Math.max(0, prev[category][pattern] - 1)
                    }
                }));
            };

            const resetAllCounts = () => {
                if (confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰è®¡æ•°å—ï¼Ÿ')) {
                    setCounts(initializeCounts());
                }
            };

            const getCategoryTotal = (category) => {
                return Object.values(counts[category]).reduce((sum, count) => sum + count, 0);
            };

            const getTotalCount = () => {
                return Object.keys(counts).reduce((total, category) => {
                    return total + getCategoryTotal(category);
                }, 0);
            };

            const categoryColors = {
                'å¤§æ‰‹æåŒ…': { bg: '#c7522a', text: 'white' },
                'æ¯å«': { bg: '#d68a58', text: 'white' },
                'é¤å«': { bg: '#e5c185', text: 'black' },
                'æ‹‰é“¾å°åŒ…': { bg: '#96bb9f', text: 'white' },
                'å°å·æ–œæŒåŒ…': { bg: '#74a892', text: 'white' },
                'å¤§å·æ–œæŒåŒ…': { bg: '#3a978c', text: 'white' },
                'æ‰‡å­': { bg: '#008585', text: 'white' }
            };

            const exportToCSV = () => {
                let csvContent = 'å“ç±»,æ¬¾å¼,æ•°é‡\n';
                Object.keys(counts).forEach(category => {
                    Object.entries(counts[category]).forEach(([pattern, count]) => {
                        if (count > 0) {
                            csvContent += `${category},${pattern},${count}\n`;
                        }
                    });
                });

                const blob = new Blob(["\uFEFF" + csvContent], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'å¸‚åœºç»Ÿè®¡æ•°æ®.csv';
                link.click();
            };

            if (!currentCategory && !showSummary) {
                return (
                    <div className="min-h-screen bg-gray-50 p-4">
                        <div className="max-w-md mx-auto">
                            <div className="bg-white rounded-lg shadow-lg p-6 mb-4">
                                <h1 className="text-2xl font-bold text-center text-gray-800 mb-1">ğŸ¨ THIS THAT STUDIO å¸‚é›†ç»Ÿè®¡</h1>
                                <div className="text-center text-gray-500 text-sm mb-1">å¤§é¦‹å°å­å¼€å‘</div>
                                <div className="text-center text-gray-400 text-xs mb-2">èªæ˜è›‹å­â¤å¤§é¦‹å°å­</div>
                                <div className="text-center text-gray-600 mb-4">
                                    <p>æ€»è®¡æ•°ï¼š<span className="text-2xl font-bold text-blue-600">{getTotalCount()}</span></p>
                                </div>
                                <div className="flex gap-2 justify-center">
                                    <button onClick={() => setShowSummary(true)} className="touch-button flex items-center gap-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">
                                        ğŸ“Š ç»Ÿè®¡
                                    </button>
                                    <button onClick={resetAllCounts} className="touch-button flex items-center gap-1 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors">
                                        ğŸ”„ é‡ç½®
                                    </button>
                                </div>
                            </div>
                            <div className="grid grid-cols-1 gap-3">
                                {Object.keys(productCategories).map(category => (
                                    <button key={category} onClick={() => setCurrentCategory(category)} className="touch-button text-white p-4 rounded-lg shadow-md hover:shadow-lg transition-all transform hover:scale-105 active:scale-95"
                                        style={{ backgroundColor: categoryColors[category].bg, color: categoryColors[category].text }}>
                                        <div className="text-lg font-bold">{category}</div>
                                        <div className="text-sm opacity-90">
                                            {productCategories[category].length} æ¬¾å¼ Â· å·²è®¡æ•° {getCategoryTotal(category)}
                                        </div>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            }

            if (showSummary) {
                return (
                    <div className="min-h-screen bg-gray-50 p-4">
                        <div className="max-w-md mx-auto">
                            <div className="bg-white rounded-lg shadow-lg p-6">
                                <div className="flex items-center gap-3 mb-6">
                                    <button onClick={() => setShowSummary(false)} className="touch-button p-2 hover:bg-gray-100 rounded-full transition-colors">â† è¿”å›</button>
                                    <h2 className="text-xl font-bold">ğŸ“Š é”€å”®ç»Ÿè®¡</h2>
                                    <button onClick={exportToCSV} className="touch-button px-4 py-2 rounded-lg text-black" style={{ backgroundColor: '#f0daa5' }}>
                                        ğŸ“¤ å¯¼å‡º CSV
                                    </button>
                                </div>

                                <div className="mb-6 text-center">
                                    <div className="text-3xl font-bold text-blue-600">{getTotalCount()}</div>
                                    <div className="text-gray-600">æ€»é”€é‡</div>
                                </div>

                                <div className="space-y-4">
                                    {Object.keys(productCategories).map(category => {
                                        const total = getCategoryTotal(category);
                                        return (
                                            <div key={category} className="border rounded-lg p-4">
                                                <div className="flex justify-between items-center mb-2">
                                                    <span className="px-3 py-1 text-sm rounded-full" style={{ backgroundColor: categoryColors[category].bg, color: categoryColors[category].text }}>{category}</span>
                                                    <span className="font-bold text-lg">{total}</span>
                                                </div>
                                                {total > 0 && (
                                                    <div className="ml-4 space-y-1">
                                                        {Object.entries(counts[category])
                                                            .filter(([_, count]) => count > 0)
                                                            .map(([pattern, count]) => (
                                                                <div key={pattern} className="flex justify-between text-sm text-gray-600">
                                                                    <span>{pattern}</span>
                                                                    <span>{count}</span>
                                                                </div>
                                                            ))}
                                                    </div>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gray-50 p-4">
                    <div className="max-w-md mx-auto">
                        <div className="bg-white rounded-lg shadow-lg p-4 mb-4">
                            <div className="flex items-center gap-3 mb-4">
                                <button onClick={() => setCurrentCategory(null)} className="touch-button p-2 hover:bg-gray-100 rounded-full transition-colors">â† è¿”å›</button>
                                <div>
                                    <h2 className="text-lg font-bold">{currentCategory}</h2>
                                    <p className="text-sm text-gray-600">å·²è®¡æ•°ï¼š{getCategoryTotal(currentCategory)}</p>
                                </div>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 gap-3">
                            {productCategories[currentCategory].map(pattern => (
                                <div key={pattern} className="bg-white rounded-lg shadow-md p-4 flex items-center justify-between">
                                    <div className="flex-1">
                                        <div className="font-medium text-gray-800">{pattern}</div>
                                    </div>
                                    <div className="flex items-center gap-3">
                                        <button onClick={() => decrementCount(currentCategory, pattern)} className="touch-button w-12 h-12 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors active:scale-95 text-xl font-bold flex items-center justify-center" disabled={counts[currentCategory][pattern] === 0}>-</button>
                                        <div className="w-12 text-center"><span className="text-2xl font-bold text-blue-600">{counts[currentCategory][pattern]}</span></div>
                                        <button onClick={() => incrementCount(currentCategory, pattern)} className="touch-button w-12 h-12 bg-green-500 text-white rounded-full hover:bg-green-600 transition-colors active:scale-95 text-xl font-bold flex items-center justify-center">+</button>
                                    </div>
                                </div>
                            ))}
                        </div>

                        <div className="mt-6 text-center text-gray-500 text-sm">
                            ğŸ’¡ ç‚¹å‡» + å·å¢åŠ ï¼Œç‚¹å‡» - å·å‡å°‘
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<ArtMarketCounter />, document.getElementById('root'));
    </script>
</body>
</html>
